(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/scenario-generator/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"032a":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("1080"),i=a.n(s);i.a},"08da":function(t,e,a){"use strict";var s=a("5a60"),i=a.n(s);i.a},"0d2a":function(t,e,a){},1:function(t,e){},1080:function(t,e,a){},"1ba6":function(t,e,a){},2:function(t,e){},"22d0":function(t,e,a){},2998:function(t,e,a){"use strict";var s=a("d297"),i=a.n(s);i.a},3:function(t,e){},3121:function(t,e,a){"use strict";var s=a("db1b"),i=a.n(s);i.a},"3a50":function(t,e,a){"use strict";var s=a("7028"),i=a.n(s);i.a},"3e03":function(t,e,a){},4:function(t,e){},"41cf":function(t,e,a){"use strict";var s=a("1ba6"),i=a.n(s);i.a},"502b":function(t){t.exports=JSON.parse('{"gb":{"APP":{"ABOUT":"about","ACTIVE":"active {item}","ADD":"Add {item}","ADD_CONTEXT":"add context","ADD_DIMENSIONS":"Add dimensions","ARE_YOU_SURE":"are you sure?","BUILD_SENTENCE":"Build a sentence structure","CANCEL":"cancel","CLOSE":"close","COMBINATIONS":"combinations","CONSISTENCY":"consistency | consistencies","CONSISTENT":"Combinations with these two items are possible","CREATE_SCENARIO":"Create scenario","DELETE":"delete {item}","DESCRIPTION":"description | description","DIMENSION":"dimension | dimensions","DIMENSION_INCLUDED":"do or do not include dimension in scenario","DONE":"done","EDIT":"edit {item}","EMPTY":"empty {item}","EXPLAIN_CLEAR_ICON":"Click the cross-icon to clear the selected dimension value","EXPORT":"Export file","FILL_SENTENCE":"Fill the sentence","GENERATE":"Generate {item}","IMPORT":"Import file","IMPORT_EXPORT_TITLE":"Import/export project","INCLUDE_ALL":"include all dimensions in scenario","INCONSISTENT":"Combinations with these two items are impossible","KEY":"key","LANGUAGE":"language","LOCATION":"location","NAME":"name","NO":"no","NO_LOCATION_CONTEXT":"No location found in scenario","NO_LOCATION_TYPE_CONTEXT":"No location type found in scenario","NO_VALID_SCENARIO":"No valid scenario generated after {count} iterations.","OPEN_CLOSE":"show/hide content","PARTLY_CONSISTENT":"Combinations with these two items are improbable","PIN":"save {item}","SAVE":"save","SCENARIO":"Scenario","SELECTED":"selected","SELECT_DIMENSION":"select a dimension","SENTENCE":"sentence | sentences","SHOW_SCENARIO":"Show scenario","STRUCTURE":"structure","THEME":"theme","TITLE":"title","TOGGLE_MAP_BASE":"toggle map background","UNLOCK_ALL":"unlock all locked dimensions","UNLOCK_ONE":"unlock this locked dimension","VALUE":"value","WRITE_NARRATIVE":"write a narrative","YES":"yes"},"COMP":{"AVAILABLEBUDGET":"budget | budget","BEHAVIOURDURINGPREPARATION":"behaviour during preparation","CAPABILITIES":"capability | capabilities","COMPARTMENTSPRESENT":"compartments present","CRIMINALPHASE":"criminal phase","DURATION":"duration | durations","EQUIPMENT":"equipment | equipments","EXISTINGINFRA":"existing infra | existing infras","IMPACT":"impact","INTENT":"bystander intent","LOCATION":"location | locations","MODUSOPERANDIDURINGEXECUTION":"modus operandus | modus operandi","MOTIVATION":"motivation | motivations","NARRATIVE":"narrative | narratives","OBJECT":"object | objects","OPENCOMPARTMENTS":"open compartment | open compartments","PEOPLEDENSITY":"person density | person densities","PERSONS":"person | persons","PHYSICALANGLEOFATTACKDURINGEXECUTION":"physical angle of attack | physical angle of attacks","PHYSICAL_ANGLE":"physical angle | physical angles","PRIVACYAWARENESS":"privacy awareness","RELATIONOWNEROBJECTANDOWNERSECURITYSYSTEM":"relation owner object and owner security system","RESPONSIBILITY":"responsibility | responsibilities","SCENARIOS":"scenario | scenarios","SECURITYAWARENESS":"security awareness","TARGETTYPE":"target type | target types","THREATDIRECTION":"threat direction | threat directions","TYPEOFENVIRONMENT":"environment type | environment types","TYPEOFOBJECT":"type of object | type of objects","WEAPON":"weapon | weapons","WEATHERBEHAVIOUR":"weather behaviour","WEATHERTYPE":"weather condition | weather conditions"},"UTIL":{"A":"a","AN":"an"}}}')},"527d":function(t,e,a){"use strict";var s=a("9b5b"),i=a.n(s);i.a},"53e5":function(t,e,a){},"56f6":function(t,e,a){},"5a60":function(t,e,a){},"5e52":function(t,e,a){"use strict";var s=a("dda0"),i=a.n(s);i.a},7028:function(t,e,a){},"72d4":function(t,e,a){"use strict";var s=a("0d2a"),i=a.n(s);i.a},"76ff":function(t,e,a){t.exports=a.p+"img/words.08a4c398.png"},7824:function(t,e,a){},"7b0f":function(t,e,a){"use strict";var s=a("c49d"),i=a.n(s);i.a},"7b6c":function(t,e,a){},"87e1":function(t){t.exports=JSON.parse('{"scenarios":[{"id":"demo1","type":"scenarios","category":"SCENARIO","name":"Demo","categories":{"Threat":["ThreatDirection","Impact","Motivation","ModusOperandiDuringExecution","Equipment","Responsibility"],"Context":["WeatherType","WeatherBehaviour","TypeOfObject","AvailableBudget","OpenCompartments","Location"]}}],"ThreatDirection":["Hannibal","The Romans","Verweggistan"],"Impact":["Low","Medium","High"],"Motivation":["Money","Justice","Revenge"],"ModusOperandiDuringExecution":["Sniper attack","Kidnapping","Singing"],"Equipment":["None","Drone","Bomb","Helicopter","Hammer"],"Responsibility":["Private","Public"],"WeatherType":["Rainy","Sunny","Windy","Cloudy"],"WeatherBehaviour":["Stable","Changing"],"TypeOfObject":["Church","Park","Palace","Airport"],"AvailableBudget":["Knowledge","Water"],"OpenCompartments":["Open","Closed"],"Location":["Vietnam","Washington","Buitenpost"]}')},"8af2":function(t){t.exports=JSON.parse('{"nl":{"APP":{"ABOUT":"over","ACTIVE":"actief {item}","ADD":"{item} toevoegen","ADD_CONTEXT":"voeg context toe","ADD_DIMENSIONS":"voeg dimensies toe","ARE_YOU_SURE":"ben je zeker?","BUILD_SENTENCE":"Bouw een zinsstructuur","CANCEL":"cancel","CLOSE":"sluit","COMBINATIONS":"combinaties","CONSISTENCY":"consistentie | consistenties","CONSISTENT":"Combinaties met deze twee items zijn mogelijk","CREATE_SCENARIO":"creÃ«er scenario","DELETE":"delete {item}","DESCRIPTION":"beschrijving | beschrijvingen","DIMENSION":"dimensie | dimensies","DIMENSION_INCLUDED":"dimensie wel of niet gebruiken in scenario","DONE":"klaar","EDIT":"{item} bewerken","EMPTY":"leeg {item}","EXPLAIN_CLEAR_ICON":"Klik het kruisje achter een item om deze leeg te maken","EXPORT":"Exporteer bestand","FILL_SENTENCE":"Vul de zin in","GENERATE":"Genereer {item}","IMPORT":"Importeer bestand","IMPORT_EXPORT_TITLE":"Importeer/exporteer project","INCLUDE_ALL":"alle dimensiess meenemen in scenario","INCONSISTENT":"Combinaties met deze twee items zijn uitgesloten","KEY":"key","LANGUAGE":"taal","LOCATION":"lokatie","NAME":"naam","NO":"nee","NO_LOCATION_CONTEXT":"Geen locatie gevonden in scenario","NO_LOCATION_TYPE_CONTEXT":"Geen locatie type gevonden in scenario","NO_VALID_SCENARIO":"Geen valide scenario gegenereerd na {count} iteraties.","OPEN_CLOSE":"toon/verberg inhoud","PARTLY_CONSISTENT":"Combinaties met deze twee items zijn onwaarschijnlijk","PIN":"bewaar {item}","SAVE":"opslaan","SCENARIO":"scenario","SELECTED":"geselecteerd","SELECT_DIMENSION":"selecteer een dimensie","SENTENCE":"zin | zinnen","SHOW_SCENARIO":"toon scenario","STRUCTURE":"structuur","THEME":"thema","TITLE":"titel","TOGGLE_MAP_BASE":"wissel kaart achtergrond","UNLOCK_ALL":"alle vastgezette dimensies losmaken","UNLOCK_ONE":"deze vastgezette dimensie losmaken","VALUE":"value","WRITE_NARRATIVE":"schrijf een narratief","YES":"ja"},"COMP":{"AVAILABLEBUDGET":"budget | budget","BEHAVIOURDURINGPREPARATION":"gedrag tijdens voorbereiding","CAPABILITIES":"capability | capabilities","COMPARTMENTSPRESENT":"aanwezige compartimenten","CRIMINALPHASE":"criminele fase","DURATION":"duur | duur","EQUIPMENT":"materieel","EXISTINGINFRA":"bestaande infra | bestaande infras","IMPACT":"impact","INTENT":"intentie publiek","LOCATION":"locatie | locaties","MODUSOPERANDIDURINGEXECUTION":"modus operandus | modus operandi","MOTIVATION":"motivatie | motivaties","NARRATIVE":"narratief | narratieven","OBJECT":"object | objecten","OPENCOMPARTMENTS":"open compartiment | open compartimenten","PEOPLEDENSITY":"personendichtheid | personendichtheden","PERSONS":"persoon | personen","PHYSICALANGLEOFATTACKDURINGEXECUTION":"fysieke aanvalshoek | fysieke aanvalshoeken","PHYSICAL_ANGLE":"fysieke hoek | fysieke hoek","PRIVACYAWARENESS":"privacy-bewustzijn","RELATIONOWNEROBJECTANDOWNERSECURITYSYSTEM":"relatie eigenaar object en eigenaar beveiligingssysteem","RESPONSIBILITY":"verantwoordelijkheid | verantwoordelijkheden","SCENARIOS":"scenario | scenarios","SECURITYAWARENESS":"beveiligingsbewustzijn","TARGETTYPE":"doeltype | doeltypes","THREATDIRECTION":"dreigingsrichting | dreigingsrichtingen","TYPEOFENVIRONMENT":"omgevingstype | omgevingstypes","TYPEOFOBJECT":"objecttype | objecttypes","WEAPON":"wapen | wapens","WEATHERBEHAVIOUR":"weersgedrag | weersgedragingen","WEATHERTYPE":"weersconditie | weerscondities"},"UTIL":{"A":"een","AN":"een"}}}')},"90f7":function(t,e,a){"use strict";var s=a("56f6"),i=a.n(s);i.a},"9b5b":function(t,e,a){},a86d:function(t,e,a){},abb8:function(t,e,a){},ad40:function(t,e,a){"use strict";var s=a("a86d"),i=a.n(s);i.a},afd5:function(t,e,a){},b0af:function(t,e,a){"use strict";var s=a("c805"),i=a.n(s);i.a},b3be:function(t,e,a){"use strict";var s=a("7b6c"),i=a.n(s);i.a},ba33:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdwAAACuBAMAAABuEKG4AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABVQTFRFAAAA////////////////////////SM9tBAAAAAd0Uk5TACRsocLp/1DZrFIAAAbuSURBVHic7Z1Lc9w2EIQlJcFZch5nRk54tqtSOW+SMs9KpeQz9Vj+/5+QSPIqS3Iw043nQmZfNYPpj6BAECC5Z2ebNm3atCmv3r3/dHt7+9f1ZW0j+XUxTMf6s7afrPp1WmnfYanrzHTaf1QK/y7n/GE6/tFTDQLOxvqiexbXsn3hr/VYH3eafCOJF9eb8aSf1Fof6uP63PtxlV4ajFp39XEnFnfahZt9qI8rH3IF1/MPf44UM/6BUzFpEntLwZXPB4jW4k3CY4nFFYcctJh6PieAsTWSuFL8Z7ia/+JXCFfqXhK3J6pJR6sormBAw13//zmqnP/6G0UBSxg/NNzV2aDMpaD8wrjCXIPCZct5/33DCSiNUbj61BGrVxR3fXoRuN+kqFcW9yYCN6SeZ/YcZj5BeRzXBRWUR+egpkIUjhtWb18XdwzFdYkKlsVdXnpRXPDOQG+kPO7y0ovi8hehg6TuDW4stjqIG965YvdGtBZXHcR1EQVXF7+iuPNLA4gbU1CYqcc0R2p+NmO4LqpiVxN3fjZjuHEF11OruPY4zboXwnWRFavi3tO4ahCgsSbuROPGFlzNJGMbpDSSuC664nJZIbpBRnsSN77i8myOb5FRR+GyK1T+lirhjhSuS1Cxq4k7UbgpCo5VcW8I3BTn8nJsTtEkoTsC1yWpWBV3InCHJAXHqrgjjpum4F1V3EcY1yWqWBX3dZ5TDLerijuiuKkL1sGdSuPe18X9gOG6ZAXr4o6lcS+r4k4YLv4shqWxLu4I4aauVw33HsEN2dP16Hj9dUjXLCwE16Wu96LwLZhwjYVxj8aqlM2i2gO46Uaq2eaJS9gsrM7GTVmu8lj1XF/Hjdn4W+muMu5k4rqU1Y5XNJI2jOqmKG7laeTz6RWP+/A04v6AlDur3b0W7mC2sD9cXnq7WnfMC8Qn12jgmg08Mv11PDT7X0TKqMdI3Nl6qjlVmuOenZ1fz/SLnv1wvZJVcKXLONz5Vpc1J1niLkVn0xuxY6/91bpBWDiwFuC1x/XL4O7VjO+M7GV5ZxSrjqurZw0Y7Z04rqF1fWO0ahpXqG/89zaNK71EyWe0gisOPE5N6RrGFcpbZ/OuYVzZu5oiHqFGcGXLvZbSMK5nzuC0nIZxPdbVidjbw1VXtxrGFZ5BNz03jNt9Xbg+z9pN7xvEZd9ubxy3V3KMz4foBU8TV7sH3HBbx+2VnK8MV3DcOu6g5DSM61uZ0HIaxvV9A0TLaRjXZz0kp11cdfWmYVzPDojTchrG9QzNTkt5e7iDltIyruxdTfEtCTSLq+8ZGh+QpOsV3TSRHDs1o+VNE3FdXc/QaU8cV7i/cXpG07iC+4FNaAl3ZcB4lqPswwr8g0zWo0Nk55Z9FIV/DtF68mbh3xnhguGcuPQj8ebzvTeE3eK431p+VhlmRHdU3HyyvTAufTYDCf/zDkRsGVxn259nADF/v1RGXlk3aJPj0h8t7ZGof36+eo81VxiXfXEk7UPW5if19fQAXMcZTIsr+M2MSw5WKd+Jq4LbUwbTviGxK4/rKINpcS3aDLic/7T3HDVwHWeQCtdl/TREFlxq8EmKK9jNj0udzXFf/1zIWIbMhOsIh+TRMRurgMv0l9UipTq4zHvv5MmgyvzRnky4BMB/0fQ9sk+C2yK4xL8jF60L+OE8vYFQ3B62+BQ9wNF2W1VwrXe/5hkOjlYlmC2Ei5+fT8GJbooq4jrUI3dw7Kbq4MJrOM/RSb5gYk+Y8+HCHcadC5oEr+VwUQLu4GC1K+CiBECjmJAfusyICxK8BDuQibNaEhckgGwQDdXCBQm+BPcglFfWTmd2XOzq8iXYoViE07K42I0O5gNvpxouRnAIdigXbLQ0LkRwCI5csQJpc+JCE0msXUvgQJUVF9oMfA3G7xkF2b8tXQDXAUZRJ6qwGVVuXISAOzge7U4Dt7edcgdHFt65eXGdbZWLlrU7EVygw46jAz+QCd3XF8F1ptfj6MAF5+5kcO1Ft1l4z1AeBOwdROCqlsjmlxlBUyuGNjeu48ya4ZDFlLiqo1W02V+LeHq0gqePRXDNqfAinP7tGo7W2J+Jx1XDhQwrfqEdiauvOcTj0p/C6xlawZ8u1T39rTe6gJBB0DITjEBc1Y5UgcUlN4dJ0bja4CkVcKxjbn8pN65mX6wwsJZBXmCznnMv4mpmxArqtVfMgHiDaAPeZB9I8+q6jJxhzyat96O8ciyucuz5Ej5Xg07Lj8mvUiY+Iq7i3lfCf2vndaW+cGY/DaioJ3H97v01fMfUn3HuvQQEn8gHff/pVtToS7j4TQr/rNUQU9QMz91yF8bYgC5WPbzvanvKq3dHxPuPtd2U0fnVVeBldtOmTZs2nYL+BeoD0CS8GVM4AAAAAElFTkSuQmCC"},c49d:function(t,e,a){},c805:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("de2a"),a("0f31"),a("7527");var s=a("90e4"),i=a.n(s),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("AppBar"),a("NavigationDrawer"),a("v-main",{attrs:{id:"content"}},[a("router-view"),a("v-snackbar",{attrs:{top:"",color:"#942807"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",timeout:"3000",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(t._s(t.note)+" ")])],1)],1)},o=[],r=a("0f9e"),c=a("fc36"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app-bar",{staticClass:"ind-app-bar noselect font-weight-light no-print",attrs:{app:"",dense:"",flat:"","clipped-left":"",height:"42"}},[s("v-icon",{staticClass:"home-icon pr-3",on:{click:t.openDrawer}},[t._v("mdi-menu")]),s("v-toolbar-title",[t._v("V2018 Scenario Generator")]),s("div",{staticClass:"text-center"},[s("v-btn",{staticClass:"ml-8 mx-2 my-2 app-btn",attrs:{outlined:"",to:"add",small:"",color:"blue"}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(t._s(t.$tc("APP.DIMENSION",2))+" ")],1),s("v-btn",{staticClass:"mx-2 my-2 app-btn",attrs:{outlined:"",to:"consistency",small:"",color:"blue"}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-domain")]),t._v(t._s(t.$tc("APP.CONSISTENCY",2))+" ")],1),s("v-btn",{staticClass:"mx-2 my-2 app-btn",attrs:{outlined:"",to:"create",small:"",color:"blue"}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(t._s(t.$t("APP.CREATE_SCENARIO"))+" ")],1),s("v-btn",{staticClass:"mx-2 my-2 app-btn",attrs:{outlined:"",to:"show",small:"",color:"blue"}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-graph-outline")]),t._v(t._s(t.$t("APP.SHOW_SCENARIO"))+" ")],1),s("v-btn",{staticClass:"px-1 mx-2 my-2 app-btn",attrs:{outlined:"",to:"about",small:"",color:"blue"}},[s("v-icon",[t._v("mdi-help-circle-outline")])],1)],1),s("div",{staticClass:"blue--text pr-2 pl-6"},[t._v(t._s(t._f("capitalize")(t.$tc("COMP.NARRATIVE")))+":")]),s("div",{staticClass:"text-center narr-selector"},[s("v-select",{attrs:{items:t.sortedNarratives,"item-text":"name","return-object":"",dense:"","hide-details":""},on:{change:t.narrativeSelected},model:{value:t.activeNarrative,callback:function(e){t.activeNarrative=e},expression:"activeNarrative"}})],1),s("v-spacer"),s("v-sheet",{staticClass:"blue px-2 d-flex",attrs:{height:"100%",tile:""}},[s("a",{staticClass:"tno-link",attrs:{href:"https://www.tno.nl",target:"_blank"}},[s("v-img",{attrs:{src:a("ba33"),"max-width":"50",contain:""}})],1)])],1)},d=[],u=a("9ec3"),p=a.n(u);let v=class extends c["c"]{constructor(){super(...arguments),this.scenario={},this.activeNarrative={}}get sortedNarratives(){return this.scenario&&this.scenario.narratives?p.a.sortBy(this.scenario.narratives,"name"):[]}async narrativeSelected(){this.$store.actions.changeNarrative(this.activeNarrative)}openDrawer(){this.$store.actions.toggleDrawer(!0)}async mounted(){this.$store.states.map(t=>{this.scenario=t.scenarios.current,this.activeNarrative=t.app.narrative||{}})}};v=Object(r["a"])([Object(c["a"])({components:{}})],v);var h=v,m=h,f=(a("cfa4"),a("2be6")),g=Object(f["a"])(m,l,d,!1,null,null,null),b=g.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-navigation-drawer",{staticClass:"noselect no-print",attrs:{width:"240px",app:"",absolute:"",temporary:""},on:{input:t.drawerChanged},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-row",{staticClass:"my-3 ml-0",attrs:{"no-gutters":""}},[s("v-btn",{attrs:{text:""},on:{click:t.closeDrawer}},[s("v-icon",[t._v("mdi-arrow-left")]),t._v(" "+t._s(t.$t("APP.CLOSE")))],1)],1),s("v-row",{staticClass:"my-4",attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[s("v-img",{attrs:{src:a("76ff"),"max-width":"180",contain:""}})],1),s("v-card",{staticStyle:{background:"transparent"},attrs:{flat:"",tile:""}},[s("div",{staticClass:"overline px-2 py-2"},[t._v(" "+t._s(t.$t("APP.SCENARIO"))+" ")]),s("v-divider"),s("v-card-text",{staticClass:"text-description px-4 py-1"},[s("div",{staticClass:"blue--text"},[t._v(" "+t._s(t._f("capitalize")(t.$t("APP.ACTIVE",{item:t.$tc("COMP.SCENARIOS")})))+": "),s("span",{staticClass:"bold--text"},[t._v(t._s(this.activeScenario.name||"-")+" ")]),s("span",[t.activeScenario?s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mr-1 add-button",attrs:{color:"blue",icon:"","x-small":"",elevation:"2"}},"v-btn",i,!1),a),[s("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!1,3635798699),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("EditComponentCard",{attrs:{itemkey:"scenarios",itemid:t.activeScenario.id,itemname:t.activeScenario.name},on:{close:t.closeMenu}})],1):t._e()],1)])])],1),s("v-row",{staticClass:"mt-2 ml-4",attrs:{"no-gutters":""}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mr-1",attrs:{color:"accent darken-1",small:"",elevation:"2"}},"v-btn",i,!1),a),[s("v-icon",{staticClass:"pr-1",attrs:{small:""}},[t._v("mdi-import")]),t._v(" Import/export ")],1)]}}]),model:{value:t.importMenu,callback:function(e){t.importMenu=e},expression:"importMenu"}},[s("ImportExportCard",{on:{close:t.closeImportMenu}})],1)],1),t.activeScenario?s("v-card",{staticClass:"mb-0",staticStyle:{background:"transparent"},attrs:{flat:"",tile:""}},[s("div",{staticClass:"overline px-2 py-2"},[t._v(t._s(t.$tc("COMP.NARRATIVE",2)))]),s("v-divider"),s("v-card-text",{staticClass:"text-description px-4 py-1"},[s("div",{staticClass:"blue--text"},[t._v(" "+t._s(t._f("capitalize")(t.$t("APP.ACTIVE",{item:t.$tc("COMP.NARRATIVE")})))+": "),s("span",{staticClass:"bold--text"},[t._v(t._s(this.activeNarrative.name||"-")+" ")]),s("span",[t.activeNarrative?s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mr-1 add-button",attrs:{color:"blue",icon:"","x-small":"",elevation:"2"}},"v-btn",i,!1),a),[s("v-icon",[t._v("mdi-trash-can-outline")])],1)]}}],null,!1,3859447078),model:{value:t.narMenu,callback:function(e){t.narMenu=e},expression:"narMenu"}},[s("DeleteCard",{on:{close:t.closeNarMenu}})],1):t._e()],1)])])],1):t._e(),s("v-row",{staticClass:"my-0 ml-4",attrs:{"no-gutters":""}},[s("v-select",{attrs:{items:t.sortedNarratives,"item-text":"name","return-object":"",dense:"","hide-details":""},on:{change:t.narrativeSelected},model:{value:t.activeNarrative,callback:function(e){t.activeNarrative=e},expression:"activeNarrative"}})],1),s("v-card",{staticClass:"mt-6",staticStyle:{background:"transparent"},attrs:{flat:"",tile:""}},[s("div",{staticClass:"overline px-2 py-2"},[t._v(t._s(t.$t("APP.LANGUAGE")))]),s("v-divider"),s("v-card-text",{staticClass:"text-description px-4 py-1"},[s("v-radio-group",{staticClass:"ind-radio",on:{change:t.languageChanged},model:{value:t.activeLanguage,callback:function(e){t.activeLanguage=e},expression:"activeLanguage"}},t._l(t.languages,(function(e){return s("v-radio",{key:e,attrs:{label:e,value:e},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",[s("CountryFlag",{attrs:{iso:e,mode:"squared"}}),t._v(" "+t._s(e))],1)]},proxy:!0}],null,!0)})})),1)],1)],1),s("v-card",{staticStyle:{background:"transparent"},attrs:{flat:"",tile:""}},[s("div",{staticClass:"overline px-2 py-2"},[t._v(t._s(t.$t("APP.THEME")))]),s("v-divider"),s("v-card-text",{staticClass:"text-description px-4 py-1"},[s("v-radio-group",{staticClass:"ind-radio",on:{change:t.themeChanged},model:{value:t.activeTheme,callback:function(e){t.activeTheme=e},expression:"activeTheme"}},t._l(t.themes,(function(t){return s("v-radio",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1)},C=[],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"edit-component-card",attrs:{dense:""}},[t._v(" "+t._s(t.$t("APP.EDIT",{item:this.getTranslateKey()}))+" ")]),a("v-card-text",{staticClass:"pb-0"},[a("v-text-field",{attrs:{label:t._f("capitalize")(""+t.$t("APP.NAME")),autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editItem(e)}},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),a("v-text-field",{attrs:{label:"Type",disabled:""},model:{value:t.itemkey,callback:function(e){t.itemkey=e},expression:"itemkey"}},[t._v("itemkey")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("APP.CANCEL"))+" ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.editItem}},[t._v(" "+t._s(t.$t("APP.SAVE"))+" ")])],1)],1)},_=[];let E=class extends c["c"]{constructor(){super(),this.newName=""}getTranslateKey(){return this.$tc("COMP."+this.itemkey.toUpperCase())}async editItem(){await this.$store.actions[this.itemkey].save({id:this.itemid,name:this.newName}),await this.$store.actions[this.itemkey].load(this.itemid),this.$emit("close")}async cancel(){this.$emit("close")}async mounted(){}};Object(r["a"])([Object(c["b"])({default:""})],E.prototype,"itemkey",void 0),Object(r["a"])([Object(c["b"])({default:""})],E.prototype,"itemname",void 0),Object(r["a"])([Object(c["b"])({default:""})],E.prototype,"itemid",void 0),E=Object(r["a"])([Object(c["a"])({components:{}})],E);var N=E,T=N,A=(a("e8b2"),Object(f["a"])(T,O,_,!1,null,"2055c520",null)),x=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"add-component-card",attrs:{dense:""}},[t._v(" "+t._s(t.$t("APP.IMPORT_EXPORT_TITLE"))+" ")]),a("v-card-text",{staticClass:"pb-0"},[a("v-card",[a("div",{staticClass:"overline px-2 py-2"},[t._v(t._s(t.$t("APP.IMPORT")))]),a("v-divider"),a("v-card-text",{staticClass:"pa-0"},[a("v-file-input",{attrs:{accept:"application/json","show-size":"","truncate-length":"20",label:"Open"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"accent darken-1"},on:{click:t.importItem}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-file-import ")]),t._v(t._s(t.$t("APP.IMPORT"))+" ")],1)],1)],1),a("v-card",{staticClass:"mt-1"},[a("div",{staticClass:"overline px-2 py-2"},[t._v(t._s(t.$t("APP.EXPORT")))]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"ml-2",attrs:{color:"accent darken-1"},on:{click:t.exportItem}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-file-export ")]),t._v(t._s(t.$t("APP.EXPORT"))+" ")],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("APP.DONE"))+" ")])],1)],1)},I=[],k=a("3a67"),P=a("7ada"),j=a.n(P);const w=Object.assign||((t,e)=>(e&&Object.keys(e).forEach(a=>t[a]=e[a]),t)),L=(t,e,a)=>{const s=typeof a;if(a&&"object"===s)if(Array.isArray(a))for(const i of a)e=L(t,e,i);else for(const i of Object.keys(a)){const s=a[i];"function"===typeof s?e[i]=s(e[i],$):void 0===s?t&&!isNaN(+i)?e.splice(i,1):delete e[i]:null===s||"object"!==typeof s||Array.isArray(s)?e[i]=s:"object"===typeof e[i]?e[i]=s===e[i]?s:$(e[i],s):e[i]=L(!1,{},s)}else"function"===s&&(e=a(e,$));return e},$=(t,...e)=>{const a=Array.isArray(t);return L(a,a?t.slice():w({},t),e)};var R=a("d843"),M=a("87e1"),D=a("ec26");const V="V2018_THEME",z=(t=!1)=>t?Object(D["a"])():Object(D["a"])().substr(0,8),U=console.log,G=console.error,F=M,B=()=>t=>{if(U(`Start LocalStorageFactory ${t}...`),!localStorage.getItem(t)&&F.hasOwnProperty(t)){U(`Loading example keys for ${t}...`);const e=F[t].map(e=>"scenarios"===t?Object.assign({inconsistencies:[],narratives:[]},e):{id:z(),name:e,type:t});localStorage.setItem(t,JSON.stringify(e))}const e=async e=>{try{let a=JSON.parse(localStorage.getItem(t)||"[]");return a.push(e),a=a.sort((t,e)=>t.name.localeCompare(e.name)),localStorage.setItem(t,JSON.stringify(a)),a}catch(a){return G(a.message)}},a=async a=>{try{let s=JSON.parse(localStorage.getItem(t)||"[]");const i=s.findIndex(t=>t.id===a.id);if(i>=0){const e=s.splice(i,1).pop(),n=Object.assign(e,a);return s.push(n),s=s.sort((t,e)=>t.name.localeCompare(e.name)),localStorage.setItem(t,JSON.stringify(s)),s}return e(a)}catch(s){return G(s.message)}},s=async t=>t.id?a(t):e(t),i=async e=>{try{const a=JSON.parse(localStorage.getItem(t)||"[]"),s=a.findIndex(t=>t.id===e);if(s>=0){const e=a.splice(s,1).pop();return localStorage.setItem(t,JSON.stringify(a)),U("Deleted "+e.id),a}return G("Item not deleted: "+e)}catch(a){return G(a.message)}},n=e=>{const a=JSON.parse(localStorage.getItem(t)||"[]"),s=a.find(t=>t.id===e);return s},o=async()=>JSON.parse(localStorage.getItem(t)||"[]"),r=async e=>{localStorage.setItem(t,JSON.stringify(e))},c=async()=>{const e=[];localStorage.setItem(t,JSON.stringify(e))};return{create:e,update:a,save:s,del:i,load:n,loadList:o,saveList:r,resetList:c}},X=B(),Y=t=>{const e=X(t);return{initial:{[t]:{mode:void 0,current:void 0,list:[]}},actions:(a,s)=>({[t]:{updateList:async()=>{const s=await e.loadList();s&&a({[t]:{list:s}})},saveList:async()=>{s()[t]&&s()[t].list&&(await e.saveList(s()[t].list),a({[t]:{list:s()[t].list}}))},load:async i=>{const n=await e.load(i);if(n){const e=s(),{current:i={}}=e[t];Object.keys(i).forEach(t=>i[t]=void 0),a({[t]:{current:{...i,...n}}})}},save:async(s,i)=>{const n=await e.save(s);n&&(console.table(n),a({[t]:{list:n}}),i&&i(n))},del:async s=>{const i=await e.del(s);i&&a({[t]:{list:i}})},changeSection:e=>a({[t]:{section:e}})}})}};var W=a("9869"),H=a("d119"),K=a("8af2"),J=a("502b");W["default"].use(H["a"]),W["default"].use(i.a);const q=Object.assign(K,J),Q="V2018_LANGUAGE",Z=new H["a"]({locale:localStorage.getItem(Q)||"gb",fallbackLocale:"gb",messages:q,modifiers:{}}),tt=t=>Z.tc("COMP."+t.toUpperCase()).toString(),et=console.log,at={initial:{app:{apiService:Object({NODE_ENV:"production",BASE_URL:"/scenario-generator/"}).SERVER||window.location.origin,route:"/",language:localStorage.getItem(Q)||"gb",theme:localStorage.getItem(V)||"light",note:"",narrative:{},drawer:!1}},actions:(t,e)=>({search:(e,a)=>t({app:{isSearching:e,searchQuery:a}}),changePage:e=>{et("Set route "+e),t({app:{route:e}})},changeLanguage:e=>{et("Set language "+e),Z.locale=e,localStorage.setItem(Q,e),t({app:{language:e}})},changeTheme:e=>{et("Set theme "+e),localStorage.setItem(V,e),t({app:{theme:e}})},importState:e=>{et("Import state");const a=JSON.parse(e);t(a)},exportState:()=>(et("Export state"),JSON.stringify(e.map(t=>p.a.pickBy(t,(t,e)=>"app"!=e)))),changeNarrative:e=>{et("Set narrative "+e.id);let a={},s=st.reduce((t,e)=>(t[e]=void 0,t),a);s=Object.assign(s,e.components),e.components=s,t({app:{narrative:e}})},updateInconsistencies:e=>{et("Set inconsistencies"),t({scenarios:{current:{inconsistencies:e}}})},notify:e=>{et("Set notification"),t({app:{note:e}})},toggleDrawer:e=>{et("ToggleDrawer: "+e),t({app:{drawer:e}})}})},st=["ThreatDirection","Impact","Duration","Persons","Motivation","Capabilities","PhysicalAngleOfAttackDuringExecution","ModusOperandiDuringExecution","BehaviourDuringPreparation","CriminalPhase","Equipment","TargetType","Location","TypeOfObject","Responsibility","WeatherType","WeatherBehaviour","TypeOfEnvironment","PeopleDensity","Intent","ExistingInfra","PrivacyAwareness","SecurityAwareness","AvailableBudget","CompartmentsPresent","OpenCompartments","RelationOwnerObjectAndOwnerSecuritySystem"],it=[...st,"scenarios"],nt={};st.forEach(t=>nt[t]=Y(t));const ot=Y("scenarios"),rt={initial:Object.assign({},at.initial,ot.initial,...Object.values(nt).map(t=>t.initial)),actions:(t,e)=>Object.assign({},at.actions(t,e),ot.actions(t,e),...Object.values(nt).map(a=>a.actions(t,e)))},ct=Object(R["stream"])(),lt=Object(R["scan"])($,rt.initial,ct),dt=rt.actions(ct,lt),ut={actions:dt,states:lt};let pt=class extends c["c"]{constructor(){super(),this.file=null,this.fileJson=""}async openFiles(){return new Promise((t,e)=>{if(this.file){this.file.name;const a=new FileReader;a.addEventListener("load",()=>{this.file=null,a.result?t(a.result.toString()):e()}),a.readAsText(this.file)}else console.warn("No files selected"),this.file=null,e()})}async importItem(t){console.log("Import");try{this.fileJson=await this.openFiles(),this.$store.actions.importState(this.fileJson),it.forEach(async t=>{this.$store.actions.hasOwnProperty(t)&&await this.$store.actions[t].saveList()})}catch(G){console.warn("No files uploaded")}this.$emit("close")}async exportItem(){console.log("Export");let t=this.$store.actions.exportState();const e=new Blob([""+t],{type:"text/plain;charset=utf-8"});j.a.saveAs(e,`scenario-${Object(k["a"])(new Date,"yyyy-MM-dd'T'HH_mm_ss")}.json`),this.$emit("close")}async cancel(){this.$emit("close")}async mounted(){}};pt=Object(r["a"])([Object(c["a"])({components:{}})],pt);var vt=pt,ht=vt,mt=(a("08da"),Object(f["a"])(ht,S,I,!1,null,"13e8e400",null)),ft=mt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[t.activeNarrative?a("v-card-title",{staticClass:"delete-card",attrs:{dense:""}},[t._v(" "+t._s(t._f("capitalize")(t.$t("APP.DELETE",{item:t.$tc("COMP.NARRATIVE")})))+" '"+t._s(t.activeNarrative.name)+"' ")]):t._e(),a("v-card-text",{staticClass:"pb-0"},[t._v(" "+t._s(t._f("capitalize")(t.$t("APP.ARE_YOU_SURE")))+" ")]),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("APP.NO"))+" ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.deleteItem}},[t._v(" "+t._s(t.$t("APP.YES"))+" ")])],1)],1)},bt=[];let yt=class extends c["c"]{constructor(){super(),this.scenario={},this.activeNarrative=null}async deleteItem(){console.log("deleteItem"),this.scenario&&this.activeNarrative&&this.activeNarrative.id&&(this.scenario.narratives?this.scenario.narratives=this.scenario.narratives.filter(t=>t.id!=(this.activeNarrative?this.activeNarrative.id:"")):this.scenario.narratives=[],await this.$store.actions["scenarios"].save(this.scenario),await this.$store.actions["scenarios"].load(this.scenario.id),await this.$store.actions.changeNarrative({id:void 0,narrative:void 0,name:void 0,components:void 0}),this.$emit("close"))}async cancel(){this.$emit("close")}async mounted(){this.$store.states.map(t=>{this.scenario=t.scenarios.current,this.activeNarrative=t.app.narrative||{}})}};yt=Object(r["a"])([Object(c["a"])({components:{}})],yt);var Ct=yt,Ot=Ct,_t=(a("527d"),Object(f["a"])(Ot,gt,bt,!1,null,"09aa82ce",null)),Et=_t.exports;let Nt=class extends c["c"]{constructor(){super(...arguments),this.languages=["gb","nl"],this.activeLanguage="",this.themes=["light","dark"],this.scenarios=[],this.activeTheme="",this.activeScenario={},this.activeNarrative={},this.menu=!1,this.importMenu=!1,this.narMenu=!1,this.drawer=!1}get sortedNarratives(){return this.activeScenario&&this.activeScenario.narratives?p.a.sortBy(this.activeScenario.narratives,"name"):[]}drawerChanged(t){!1===t&&this.closeDrawer()}async languageChanged(){this.$store.actions.changeLanguage(this.activeLanguage)}async themeChanged(){this.$store.actions.changeTheme(this.activeTheme)}async narrativeSelected(){this.$store.actions.changeNarrative(this.activeNarrative)}async closeMenu(){this.menu=!1}async closeImportMenu(){this.importMenu=!1}async closeNarMenu(){this.narMenu=!1}activeScenarioName(){!this.activeScenario.name||this.activeScenario.name}closeDrawer(){this.$store.actions.toggleDrawer(!1)}async mounted(){console.log("navigation mounted"),this.$store.states.map(t=>{this.activeLanguage=t.app.language,this.activeTheme=t.app.theme,this.scenarios=t.scenarios.list||[],this.activeScenario=t.scenarios.current||{},this.activeNarrative=t.app.narrative||{}}),this.$store.states.map(t=>{this.drawer=t.app.drawer})}};Nt=Object(r["a"])([Object(c["a"])({components:{CountryFlag:i.a,EditComponentCard:x,ImportExportCard:ft,DeleteCard:Et}})],Nt);var Tt=Nt,At=Tt,xt=(a("ad40"),Object(f["a"])(At,y,C,!1,null,"a1dd1194",null)),St=xt.exports;let It=class extends c["c"]{constructor(){super(),this.theme="",this.scenarios=[],this.activeScenario={},this.note="",this.snackbar=!1,console.log(it),it.forEach(async t=>{this.$store.actions.hasOwnProperty(t)&&await this.$store.actions[t].updateList()})}scenariosUpdated(){!this.activeScenario&&this.scenarios&&this.scenarios.length>0&&this.$store.actions["scenarios"].load(this.scenarios[0].id)}activeScenarioUpdated(){this.activeScenario&&this.activeScenario.id&&(this.$store.states().app.narrative&&this.$store.states().app.narrative.id||this.activeScenario.narratives&&this.activeScenario.narratives.length>0&&this.$store.actions.changeNarrative(this.activeScenario.narratives[0]))}snackbarUpdated(t){t||this.$store.actions.notify("")}noteUpdated(t){t&&""!=t&&(this.snackbar=!0)}themeUpdated(t){this.$vuetify.theme.dark="dark"===t}routeUpdated(t,e){"/"+this.$store.states().app.route!==t.path&&this.$store.actions.changePage(t.path)}mounted(){this.$store.states.map(t=>{this.theme=t.app.theme,this.note=t.app.note,this.scenarios=t.scenarios.list,this.activeScenario=t.scenarios.current})}};Object(r["a"])([Object(c["d"])("scenarios")],It.prototype,"scenariosUpdated",null),Object(r["a"])([Object(c["d"])("activeScenario")],It.prototype,"activeScenarioUpdated",null),Object(r["a"])([Object(c["d"])("snackbar")],It.prototype,"snackbarUpdated",null),Object(r["a"])([Object(c["d"])("note")],It.prototype,"noteUpdated",null),Object(r["a"])([Object(c["d"])("theme")],It.prototype,"themeUpdated",null),Object(r["a"])([Object(c["d"])("$route")],It.prototype,"routeUpdated",null),It=Object(r["a"])([Object(c["a"])({components:{AppBar:b,NavigationDrawer:St}})],It);var kt=It,Pt=kt,jt=(a("034f"),Object(f["a"])(Pt,n,o,!1,null,null,null)),wt=jt.exports,Lt=a("4afd"),$t=a.n(Lt),Rt=a("5f2b"),Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"full-height pa-0",attrs:{fluid:""}},[a("v-row",{staticClass:"full-height",attrs:{"no-gutters":"",justify:"center"}},[a("v-col",{staticClass:"full-height",attrs:{md:"12",cols:"12"}},[a("span",{staticClass:"mardown-tekst",domProps:{innerHTML:t._s(t.getMarkdown())}})])],1)],1)},Dt=[],Vt=a("80da"),zt=a.n(Vt),Ut=a("3e09"),Gt=a.n(Ut);let Ft=class extends c["c"]{getMarkdown(){const t="## Developed by TNO";return zt()(t,{sanitizer:Gt.a.sanitize})}async mounted(){console.log("AboutView mounted")}};Ft=Object(r["a"])([Object(c["a"])({components:{}})],Ft);var Bt=Ft,Xt=Bt,Yt=Object(f["a"])(Xt,Mt,Dt,!1,null,"77f90419",null),Wt=Yt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"no-scroll full-height pa-0",attrs:{fluid:""}},[a("v-row",{staticClass:"full-width full-height",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"full-height",attrs:{md:"12",cols:"12"}},[a("splitpanes",{staticClass:"full-height",attrs:{vertical:""}},[a("pane",{staticClass:"pa-0",attrs:{"min-size":"10",size:"50"}},[a("splitpanes",{staticClass:"full-height",attrs:{horizontal:""}},[a("pane",{staticClass:"pa-2",attrs:{"min-size":"10",size:"60"}},[a("NarrativeComponentsVert")],1),a("pane",{staticClass:"pa-2",attrs:{"min-size":"10",size:"40"}},[a("ScenarioTextVert")],1)],1)],1),a("pane",{staticClass:"pa-2",attrs:{"min-size":"10",size:"50"}},[a("MapCard")],1)],1)],1)],1)],1)},Kt=[],Jt=(a("34ea"),a("a7df")),qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"flex-card map-full-height map-full-width no-background",staticStyle:{"min-height":"500px"},attrs:{flat:"",tile:""}},[a("div",{staticClass:"overline pl-6 pr-2 pb-0 pt-1"},[t._v(" "+t._s(t.$tc("APP.LOCATION"))+" "),a("v-tooltip",{attrs:{left:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("span",t._g(t._b({staticStyle:{float:"right"}},"span",i,!1),s),[a("v-btn",{attrs:{icon:""},on:{click:t.toggleMapLayer}},[a("v-icon",[t._v("mdi-map")])],1)],1)]}}])},[a("span",[t._v(t._s(t._f("capitalize")(t.$t("APP.TOGGLE_MAP_BASE"))))])])],1),a("div",{staticClass:"map-card-height map-card-full-width"},[t.loading?a("div",{staticClass:"pr-cir"},[a("v-progress-circular",{attrs:{indeterminate:"",size:150,color:"primary"}})],1):t._e(),a("div",{staticClass:"map-overlay-coords"},[t._v(t._s(t.pointer))]),a("vl-map",{staticStyle:{height:"100%"},attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"},on:{pointermove:t.pointerMove,click:t.mapClick,postrender:t.mapRendered}},[a("vl-view",{attrs:{zoom:t.zoom,center:t.center},on:{"update:zoom":function(e){t.zoom=e},"update:center":function(e){t.center=e}}}),t.active?a("vl-interaction-select",[t.active.id_?a("vl-overlay",{key:t.active.id_,attrs:{id:t.active.id_,position:t.pointOnSurface(t.active.getGeometry()),offset:[2,2]}},[a("p",{staticClass:"cardcontent",attrs:{"auto-pan":!0},on:{click:t.closePopup}},[a("strong",[t._v(t._s(t.active.get("name")))])])]):t._e()],1):t._e(),a("vl-layer-tile",{attrs:{id:"xyz"}},[a("vl-source-xyz",{attrs:{url:t.url}})],1),a("vl-layer-vector",{attrs:{"z-index":99}},[a("vl-source-vector",{attrs:{features:t.features}},[a("vl-style-box",[a("vl-style-circle",{attrs:{radius:10}},[a("vl-style-fill",{attrs:{color:[255,20,22,.8]}}),a("vl-style-stroke",{attrs:{color:[20,250,22,.8]}})],1),a("vl-style-icon",{attrs:{src:t.iconUrl,scale:.8,anchor:[.5,.5]}})],1)],1)],1),a("vl-layer-vector",{attrs:{"z-index":98}},[a("vl-source-vector",{attrs:{features:t.features}},[a("vl-style-box",[a("vl-style-circle",{attrs:{radius:24}},[a("vl-style-fill",{attrs:{color:[20,20,252,.1]}}),a("vl-style-stroke",{attrs:{color:[255,255,255,.8],width:3}})],1)],1)],1)],1)],1)],1)])},Qt=[],Zt=a("0dd7"),te=a("c6b8");const ee="https://github.com/rinzeb/osm-icons/raw/master/png/osm{{ITEM}}.png";let ae=class extends c["c"]{constructor(){super(...arguments),this.narrative={},this.scenario={},this.locations={},this.typeOfObjects={},this.iconUrl="https://github.com/rinzeb/osm-icons/raw/master/png/osmairport.png",this.loading=!1,this.url="https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",this.urls=["https://{a-c}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png","https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"],this.zoom=8,this.center=[5.2,52.3],this.features=[],this.pointer="",this.active=null,this.initialized=!1,this.zoomMap=p.a.throttle(this.zoomMapThrottled,500,{trailing:!0}),this.pointerMove=p.a.throttle(this.pointerMoveThrottled,50,{trailing:!0}),this.updateMap=p.a.debounce(this.updateMapThrottled,500)}narrChanged(){this.updateMap()}mapClick(t){this.toggleFeature(t.pixel,t.map)}toggleFeature(t,e){let a=!1;e.forEachFeatureAtPixel(t,t=>{a||(this.active&&this.active.id_==t.id_?(this.active=null,a=!0):(this.active=t,a=!0),console.log("Open/close "+t.get("name")))}),a||(this.active=null)}mapRendered(t){this.initialized||(this.map=t.map,this.map.updateSize(),this.initialized=!0)}closePopup(t){this.active=null}pointOnSurface(...t){return Object(Zt["W"])(t[0].getCoordinates(),"EPSG:3857","EPSG:4326")}toggleMapLayer(){this.url===this.urls[0]?this.url=this.urls[1]:this.url=this.urls[0],this.map.updateSize()}getIcon(t){let e="building";if(t&&t.components){const a=p.a.pick(t.components,"TypeOfObject"),s=a&&p.a.find(this.typeOfObjects.list,t=>t.id===a.TypeOfObject),i=s&&s.context;i&&(Object.keys(i.data).pop().includes("levels")||(e=""+Object.values(i.data).pop()))}return ee.replace("{{ITEM}}",e)}zoomMapThrottled(){if(!this.features||this.features.length<1)return;let t;t=1===this.features.length?this.features[0]:Object(te["center"])(Object(te["bboxPolygon"])(Object(te["bbox"])({type:"FeatureCollection",features:this.features}))),t&&t.geometry&&t.geometry.coordinates&&(this.center=[t.geometry.coordinates[0],t.geometry.coordinates[1]],this.zoom=14)}pointerMoveThrottled(t){this.pointer=`Lat: ${t.coordinate[1].toFixed(4)}, Lon: ${t.coordinate[0].toFixed(4)}`}addFeatures(t){this.loading=!1,console.log(`Received ${t.features.length} features`);const e=[];t.features.forEach(t=>{e.push(t)}),setTimeout(()=>{c["c"].set(this,"features",e),this.zoomMap()},100)}updateMapThrottled(){if(console.log("Update map data"),this.loading=!0,this.features.length>0&&this.features.splice(0,this.features.length),this.narrative&&this.narrative.id){const t=p.a.pick(this.narrative.components,"Location"),e=t&&p.a.find(this.locations.list,e=>e.id===t.Location),a=e&&e.context;if(!a)return this.loading=!1,this.$store.actions.notify(this.$t("APP.NO_LOCATION_CONTEXT").toString()),console.log("Could not find loc in narrative "+this.narrative.name);const s=p.a.pick(this.narrative.components,"TypeOfObject"),i=s&&p.a.find(this.typeOfObjects.list,t=>t.id===s.TypeOfObject),n=i&&i.context;if(!n)return this.loading=!1,this.$store.actions.notify(this.$t("APP.NO_LOCATION_TYPE_CONTEXT").toString()),console.log("Could not find typeOfObject in narrative "+this.narrative.name);const o=this.getAmenityQuery(n);if("LOCATION"===a.type){const t=a.data;if(t.hasOwnProperty("NAME"))this.$overpass.getGeojsonFromQuery(t.NAME||e.name,o,this.addFeatures);else if(t.hasOwnProperty("COORDINATES")){const e=t.COORDINATES.split(",").map(t=>+t);this.$overpass.getGeojsonFromCoordinates(e,o,this.addFeatures)}}else this.$store.actions.notify(this.$t("APP.NO_LOCATION_CONTEXT").toString()),console.log("No location context found"),this.loading=!1}}getAmenityQuery(t){return t.data&&Object.keys(t.data).pop().includes("levels")?`${Object.keys(t.data).pop()}~${Object.values(t.data).pop()}`:`${Object.keys(t.data).pop()}=${Object.values(t.data).pop()}`}init(){this.$store.states.map(t=>{this.scenario=t.scenarios.current,this.locations=t.Location,this.typeOfObjects=t.TypeOfObject,this.narrative=t.app.narrative||{},this.iconUrl=this.getIcon(t.app.narrative)})}async mounted(){this.init(),setTimeout(()=>this.updateMap(),250)}};Object(r["a"])([Object(c["d"])("narrative")],ae.prototype,"narrChanged",null),ae=Object(r["a"])([Object(c["a"])({components:{}})],ae);var se=ae,ie=se,ne=(a("fbbd"),Object(f["a"])(ie,qt,Qt,!1,null,null,null)),oe=ne.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"flex-card",staticStyle:{background:"transparent"},attrs:{flat:"",tile:""}},[a("div",{staticClass:"overline px-2 py-0"},[t._v(t._s(t.$tc("APP.DESCRIPTION")))]),t.subtitle&&t.subtitle.length>0?a("div",{staticClass:"px-4 pt-0 pb-2 v-card__text"},[t._v(" "+t._s(t.subtitle)+" ")]):t._e(),a("v-divider"),a("v-card-text",{staticClass:"text-description"},[a("div",{domProps:{innerHTML:t._s(t.html)}}),a("v-divider",{staticClass:"my-6"})],1)],1)},ce=[];let le=class extends c["c"]{constructor(){super(),this.actors=[]}async mounted(){await this.$store.actions.scenarios.updateList()}};Object(r["a"])([Object(c["b"])({default:""})],le.prototype,"html",void 0),Object(r["a"])([Object(c["b"])({default:""})],le.prototype,"subtitle",void 0),le=Object(r["a"])([Object(c["a"])({components:{}})],le);var de=le,ue=de,pe=(a("2998"),Object(f["a"])(ue,re,ce,!1,null,"7fd689f6",null)),ve=pe.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"mt-0 overflow-y-auto full-height",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"full-height",attrs:{cols:"12"}},[a("v-card-text",{staticClass:"text-description ma-0 pa-4 full-height"},[t.narrative&&t.narrative.id?a("div",{staticClass:"full-height"},[a("div",{staticClass:"scenario-narrative full-height",domProps:{innerHTML:t._s(t.getMarkdown(t.narrative.narrative))}})]):t._e()])],1)],1)},me=[];let fe=class extends c["c"]{constructor(){super(),this.narrative={}}async init(){this.$store.states.map(t=>{this.narrative=t.app.narrative})}getMarkdown(t){return zt()(t,{sanitizer:Gt.a.sanitize})}mounted(){console.log("ScenarioText mounted"),this.init()}};fe=Object(r["a"])([Object(c["a"])({components:{}})],fe);var ge=fe,be=ge,ye=(a("41cf"),Object(f["a"])(be,he,me,!1,null,null,null)),Ce=ye.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"mt-0 overflow-y",attrs:{"no-gutters":""}},t._l(t.categoryNames,(function(e){return a("v-col",{key:e,attrs:{xs:"6",cols:"6"}},[a("div",{staticClass:"overline pl-2 pr-2 pb-0 pt-1"},[t._v(" "+t._s(e)+" ")]),a("v-card",{staticClass:"no-background"},[a("v-card-text",{staticClass:"pa-0"},[t.scenario&&t.narrative.components?a("div",{staticClass:"narr-table"},[a("v-simple-table",{staticClass:"mb-2 mr-2",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left bold--text"},[t._v(t._s(t._f("capitalize")(t.$tc("APP.DIMENSION"))))]),a("th",{staticClass:"text-left bold--text more-padding"},[t._v(t._s(t._f("capitalize")(t.$t("APP.SELECTED"))))])])]),a("tbody",{staticClass:"category-table"},[t._l(t.getNarrativeComponents(e),(function(e,s){return a("tr",{key:e},[a("td",{staticClass:"catname"},[t._v(t._s(t._f("capitalize")(t._f("translateCollectionName")(s))))]),a("td",[a("v-tooltip",{attrs:{right:"","open-delay":"200"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("div",t._g({},n),[t._v(t._s(t.getCollectionVal(e,s)))])]}}],null,!0)},[a("span",[t._v(t._s(t.getCollectionVal(e,s)))])])],1)])}))],2)]},proxy:!0}],null,!0)})],1):t._e()])],1)],1)})),1)},_e=[];let Ee=class extends c["c"]{constructor(){super(),this.scenario={},this.narrative={},this.collections=null,this.categoryNames=[],this.categories={}}async init(){this.$store.states.map(t=>{this.scenario=t.scenarios.current,this.narrative=t.app.narrative,this.categories=this.scenario?this.scenario.categories:{},this.categoryNames=Object.keys(this.categories||[]),this.collections=t})}getNarrativeComponents(t){const e=st.filter(e=>this.categories[t].includes(e));return p.a.pickBy(this.narrative.components,(t,a)=>e.includes(a))}getCollectionVal(t,e){const a=this.collections[e].list.find(e=>e.id===t);return a?a.name:"?"}getCollectionNames(t){return st.filter(e=>this.categories[t].includes(e))}mounted(){this.init()}};Ee=Object(r["a"])([Object(c["a"])({components:{}})],Ee);var Ne=Ee,Te=Ne,Ae=(a("7b0f"),Object(f["a"])(Te,Oe,_e,!1,null,"40612a34",null)),xe=Ae.exports;let Se=class extends c["c"]{constructor(){super(...arguments),this.panels=[0,1,2]}mounted(){console.log("Show mounted")}};Se=Object(r["a"])([Object(c["a"])({components:{Splitpanes:Jt["Splitpanes"],Pane:Jt["Pane"],DescriptionCard:ve,NarrativeComponentsVert:xe,MapCard:oe,ScenarioTextVert:Ce}})],Se);var Ie=Se,ke=Ie,Pe=(a("5e52"),Object(f["a"])(ke,Ht,Kt,!1,null,"30667307",null)),je=Pe.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"full-height pa-0",attrs:{fluid:""}},[a("v-row",{staticClass:"full-height",attrs:{"no-gutters":"",justify:"center"}},[a("v-col",{staticClass:"full-height pa-2",attrs:{md:"12",cols:"12"}},[a("ScenarioGenerator")],1)],1)],1)},Le=[],$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"flex-card",staticStyle:{background:"transparent"},attrs:{dense:"",flat:"",tile:""}},[a("div",{staticClass:"overline px-2 py-0"},[t._v(t._s("1. "+t.$t("APP.WRITE_NARRATIVE")))]),a("v-card-text",{staticClass:"text-description ma-0 pa-1"},[a("v-text-field",{staticClass:"name-field pb-2",attrs:{"hide-details":"",label:t._f("capitalize")(t.$t("APP.TITLE"))},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveNarrative(e)},blur:t.saveNarrative},model:{value:t.narrativeName,callback:function(e){t.narrativeName=e},expression:"narrativeName"}})],1)],1),a("v-card",{staticClass:"flex-card",staticStyle:{background:"transparent"},attrs:{dense:"",flat:"",tile:""}},[a("v-card-text",{staticClass:"text-description ma-0 pa-1"},[a("v-textarea",{attrs:{filled:"",hint:t._f("capitalize")(t.$tc("COMP.NARRATIVE"))},model:{value:t.narrativeText,callback:function(e){t.narrativeText=e},expression:"narrativeText"}})],1)],1),a("v-card",{staticClass:"flex-card generate-card",staticStyle:{background:"transparent",overflow:"auto"},attrs:{dense:"",flat:"",tile:""}},[a("div",{staticClass:"overline px-2 py-0"},[t._v(t._s("2. "+t.$t("APP.GENERATE",{item:t.$tc("APP.SCENARIO")})))]),a("v-card-text",{staticClass:"text-description ma-0 pa-1"},[a("v-container",{staticClass:"pa-0 ma-0",attrs:{fluid:""}},[a("v-row",{staticClass:"d-flex",attrs:{"no-gutters":""}},[a("v-btn",{staticClass:"d-flex ma-4",attrs:{color:"accent darken-1",elevation:"2"},on:{click:t.generateNarrative}},[t._v(" "+t._s(t.$t("APP.GENERATE",{item:t.$tc("APP.SCENARIO")}))+" ")]),a("v-btn",{staticClass:"d-flex ma-4",attrs:{color:"accent darken-1",elevation:"2"},on:{click:t.newNarrative}},[t._v(" "+t._s(t.$t("APP.EMPTY",{item:t.$tc("APP.SCENARIO")}))+" ")]),a("v-spacer"),a("v-btn",{staticClass:"d-flex ma-4 ml-8 btn-right",attrs:{color:"accent darken-1",elevation:"2"},on:{click:t.saveNarrative}},[a("v-icon",{staticClass:"pr-2"},[t._v("mdi-content-save")]),t._v(" "+t._s(t.$t("APP.PIN",{item:t.$tc("APP.SCENARIO")}))+" ")],1)],1),a("v-row",{staticClass:"mt-1 full-width",attrs:{"no-gutters":""}},t._l(t.categoryNames,(function(e){return a("v-col",{key:e,staticClass:"pl-2",attrs:{xs:"6",cols:"6"}},[a("v-card",[a("v-card-title",{attrs:{dense:""}},[t._v(" "+t._s(e)+" ")]),a("v-card-text",{staticClass:"pa-0"},[t.collections?a("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left bold--text small-col"},[a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.toggleNeglected()}}},"v-icon",i,!1),s),[t._v(" mdi-eye-check ")])]}}],null,!0)},[a("span",[t._v(t._s(t._f("capitalize")(t.$t("APP.INCLUDE_ALL"))))])])],1),a("th",{staticClass:"text-left bold--text"},[t._v("Dimension")]),a("th",{staticClass:"text-left bold--text more-padding"},[a("span",[t._v(" Selected")]),a("span",{staticClass:"close-icon-span"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",i,!1),s),[t._v(" mdi-close ")])]}}],null,!0)},[a("span",[t._v(" "+t._s(t.$t("APP.EXPLAIN_CLEAR_ICON")))])])],1)]),a("th",{staticClass:"text-left bold--text small-col pr-8"},[a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.togglePinned()}}},"v-icon",i,!1),s),[t._v(" mdi-lock-open-outline ")])]}}],null,!0)},[a("span",[t._v(t._s(t._f("capitalize")(t.$t("APP.UNLOCK_ALL"))))])])],1)])]),a("tbody",{staticClass:"category-table"},[t._l(t.categories[e],(function(e){return a("tr",{key:e,class:{"neglected-cat":t.neglected.includes(e),"pinned-cat":t.pinned.includes(e)}},[a("td",{staticClass:"small-col"},[a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on,n=s.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t.neglected.includes(e)?a("v-icon",{attrs:{small:""},on:{click:function(a){return t.toggleNeglected(e)}}},[t._v(" mdi-eye-off-outline ")]):a("v-icon",{attrs:{small:""},on:{click:function(a){return t.toggleNeglected(e)}}},[t._v("mdi-eye-outline")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t._f("capitalize")(t.$t("APP.DIMENSION_INCLUDED"))))])])],1),a("td",{staticClass:"catname"},[t._v(t._s(t._f("capitalize")(t._f("translateCollectionName")(e))))]),a("td",{staticClass:"py-1 combobox"},[a("v-select",{directives:[{name:"show",rawName:"v-show",value:!t.neglected.includes(e),expression:"!neglected.includes(cat)"}],attrs:{items:t.collections[e].list,"item-text":"name","item-value":"id",clearable:"",solo:"",dense:"","hide-details":""},model:{value:t.answers[e],callback:function(a){t.$set(t.answers,e,a)},expression:"answers[cat]"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.neglected.includes(e),expression:"neglected.includes(cat)"}],staticClass:"pl-4"},[t._v("-")])],1),a("td",{staticClass:"small-col pr-8"},[a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on,n=s.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t.pinned.includes(e)?a("v-icon",{attrs:{small:""},on:{click:function(a){return t.togglePinned(e)}}},[t._v(" mdi-lock-outline ")]):a("v-icon",{attrs:{small:""},on:{click:function(a){return t.togglePinned(e)}}},[t._v("mdi-lock-open-variant-outline")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t._f("capitalize")(t.$t("APP.UNLOCK_ONE"))))])])],1)])}))],2)]},proxy:!0}],null,!0)}):t._e()],1)],1)],1)})),1)],1)],1)],1),a("v-card",{staticClass:"flex-card",staticStyle:{background:"transparent"},attrs:{dense:"",flat:"",tile:""}},[a("v-card-text",{staticClass:"text-description ma-0 pa-1"},[a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"d-flex ma-2 ml-0",attrs:{color:"accent darken-1",elevation:"2"},on:{click:t.saveNarrative}},[a("v-icon",{staticClass:"pr-2"},[t._v("mdi-content-save")]),t._v(" "+t._s(t.$t("APP.PIN",{item:t.$tc("APP.SCENARIO")}))+" ")],1)],1)])],1),a("v-row",{staticClass:"mt-8"})],1)},Re=[];const Me=500;let De=class extends c["c"]{constructor(){super(),this.scenario={},this.rows=[],this.collections=null,this.categoryNames=[],this.categories={},this.answers={},this.neglected=[],this.pinned=[],this.generated=!1,this.narrativeName="",this.narrativeText="",this.narrative={}}narrativeChanged(t){t&&(console.log("narrativeChanged to "+t.id),this.narrativeName=t.name||"",this.narrativeText=t.narrative||"",t.components||(t.components={}),this.answers=Object.assign({},t.components),this.pinned=Object.keys(this.answers))}async init(){this.$store.states.map(t=>{this.scenario=t.scenarios.current,this.rows.length=0,st.forEach(t=>{this.rows.push(t)}),this.categories=this.scenario?this.scenario.categories:{},this.categoryNames=Object.keys(this.categories||[]),this.collections=t,this.narrative=t.app.narrative})}getCategoryRows(t){return this.rows.filter(e=>this.categories[t].includes(e))}getRandom(t){if(!this.collections||this.collections[t].list.length<=0)return"None";{const e=p.a.random(this.collections[t].list.length-1);return this.collections[t].list[e].id}}newNarrative(){this.narrativeText="",this.answers={},this.neglected.length=0,this.pinned.length=0}togglePinned(t){if(t){const e=this.pinned.indexOf(t);e>=0?this.pinned.splice(e,1):this.pinned.push(t)}else this.pinned.length>0?this.pinned.splice(0,this.pinned.length):(this.pinned.splice(0,this.pinned.length),this.rows.forEach(t=>this.pinned.push(t)))}toggleNeglected(t){if(t){const e=this.neglected.indexOf(t);e>=0?this.neglected.splice(e,1):(this.neglected.push(t),c["c"].delete(this.answers,t))}else this.neglected.length=0}generateNarrative(){console.log("generate");let t=!1,e=0;while(!t&&e<Me){e+=1;for(const t in this.categories){const e=this.categories[t];for(const t in e){const a=e[t];this.neglected.includes(a)||this.pinned.includes(a)||c["c"].set(this.answers,a,this.getRandom(a))}}t=this.isScenarioValid(),t?console.log("Valid scenario generated in iteration "+e):e==Me&&(console.log(`No valid scenario generated after ${e} iterations. Giving up...`),this.$store.actions.notify(this.$t("APP.NO_VALID_SCENARIO",{count:e}).toString()),this.answers={})}this.generated=!this.generated}isScenarioValid(){const t=this.scenario.inconsistencies||[],e=Object.values(this.answers).filter(t=>!!t),a=t.filter(t=>e.includes(t.ids[0])&&e.includes(t.ids[1])),s=a.some(t=>"totally"===t.type||"partly"===t.type&&Math.random()<.5);return!s}async saveNarrative(){if(console.log("Pin narrative"),!this.scenario)return;this.scenario.narratives?this.scenario.narratives=this.scenario.narratives.filter(t=>t.id!=this.narrativeName):this.scenario.narratives=[];let t={},e=st.reduce((t,e)=>(t[e]=void 0,t),t);e=Object.assign(e,this.answers);const a={id:this.narrativeName,name:this.narrativeName,components:e,narrative:this.narrativeText};this.scenario.narratives.push(a),await this.$store.actions["scenarios"].save(this.scenario),await this.$store.actions["scenarios"].load(this.scenario.id),await this.$store.actions.changeNarrative(a)}mounted(){console.log("ScenarioGenerator mounted"),this.init()}};Object(r["a"])([Object(c["d"])("narrative")],De.prototype,"narrativeChanged",null),De=Object(r["a"])([Object(c["a"])({components:{}})],De);var Ve=De,ze=Ve,Ue=(a("d07b"),Object(f["a"])(ze,$e,Re,!1,null,null,null)),Ge=Ue.exports;let Fe=class extends c["c"]{init(){this.$store.states.map(t=>{!t.scenarios.current&&t.scenarios.list.length>0&&this.$store.actions.scenarios.load(t.scenarios.list[0].id)})}mounted(){console.log("ScenarioView mounted"),this.init()}};Fe=Object(r["a"])([Object(c["a"])({components:{ScenarioGenerator:Ge}})],Fe);var Be=Fe,Xe=Be,Ye=(a("b3be"),Object(f["a"])(Xe,we,Le,!1,null,"2345b4fc",null)),We=Ye.exports,He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"full-height pa-0",attrs:{fluid:""}},[a("v-row",{staticClass:"full-height",attrs:{"no-gutters":"",justify:"center"}},[a("v-col",{staticClass:"full-height",attrs:{md:"12",cols:"12"}},[a("KanbanLists")],1)],1)],1)},Ke=[],Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue"}}),t._l(t.categoryNames,(function(e){return a("v-tab",{key:e},[t._v(" "+t._s(e)+" ")])}))],2),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.categories,(function(e,s){return a("v-tab-item",{key:s},[a("v-card",{staticClass:"flex-card",staticStyle:{background:"transparent"},attrs:{dense:"",flat:"",tile:""}},[a("div",{staticClass:"overline px-2 py-0"},[t._v(t._s(t.$tc("APP.DIMENSION",2)))]),a("v-card-text",{staticClass:"text-description ma-0 pa-2"},[a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},t._l(t.getCategoryRows(s),(function(t,e){return a("v-row",{key:e,staticClass:"kanban-col",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"my-1 elevation-1",attrs:{cols:"12"}},[a("KanbanList",{attrs:{itemkey:t}})],1)],1)})),1)],1)],1)],1)})),1)],1)},qe=[],Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"flex-card",attrs:{dense:"",flat:"",tile:"",color:"secondary"}},[a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-2 pl-0 divider-r",attrs:{cols:"2"}},[a("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),a("v-spacer"),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-4 add-button",attrs:{color:"accent darken-1",fab:"",small:"",elevation:"2"}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("AddComponentCard",{attrs:{itemkey:t.itemkey},on:{close:t.closeMenu}})],1)],1),a("v-col",{staticClass:"py-1 pl-1",attrs:{cols:"10"}},[a("div",{staticClass:"text-description px-2 hor-overflow"},[a("Container",{attrs:{orientation:"horizontal"}},t._l(t.items,(function(t,e){return a("Draggable",{key:e,staticClass:"min-width-card"},[a("KanbanCard",{attrs:{item:t}})],1)})),1)],1)])],1)],1)],1)},Ze=[],ta=a("80f5"),ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"flex-card ma-1 kanban-card",attrs:{tile:"",elevation:"2",color:"accent"}},[a("v-card-title",{staticClass:"px-4 pt-2 pb-0 k-c-title"},[a("div",{staticClass:"k-c-title-text"},[t._v(" "+t._s(t.item.name)+" ")]),a("v-spacer"),a("v-btn",{staticClass:"k-c-btn",attrs:{color:"secondary",icon:"","x-small":""},on:{click:t.deleteItem}},[a("v-icon",[t._v("mdi-delete")])],1)],1),a("v-card-text",{staticClass:"text-description"},[t.hasContext(t.item)?a("div",{staticClass:"not-on-hover"},[a("span",{staticClass:"secondary--text"},[t._v(" "+t._s(t.getContext(t.item)))])]):t._e(),a("div",{staticClass:"only-on-hover"},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("div",t._g(t._b({},"div",i,!1),s),[a("v-icon",{attrs:{color:"secondary",small:""}},[t._v("mdi-note-plus-outline")]),a("span",{staticClass:"secondary--text"},[t._v(" "+t._s(t.getContext(t.item)))])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("AddContextCard",{attrs:{item:t.item},on:{close:t.closeMenu}})],1)],1)])],1)},aa=[],sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"add-context-card",attrs:{dense:""}},[t._v(" "+t._s(t.$t("APP.ADD",{item:"context"}))+" ")]),a("v-card-text",{staticClass:"pb-0"},[a("v-select",{attrs:{items:t.types},on:{change:t.typeSelected},model:{value:t.activeType,callback:function(e){t.activeType=e},expression:"activeType"}}),"LOCATION"==t.activeType?a("div",[a("v-select",{attrs:{items:t.locationTypes},model:{value:t.activeLocationType,callback:function(e){t.activeLocationType=e},expression:"activeLocationType"}}),"NAME"==t.activeLocationType?a("div",[a("v-text-field",{attrs:{label:t._f("capitalize")(""+t.$t("APP.VALUE"))},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)}},model:{value:t.activeVal,callback:function(e){t.activeVal=e},expression:"activeVal"}})],1):"COORDINATES"==t.activeLocationType?a("div",[a("v-text-field",{attrs:{type:"number",label:"Latitude"},model:{value:t.activeLat,callback:function(e){t.activeLat=e},expression:"activeLat"}}),a("v-text-field",{attrs:{type:"number",label:"Longitude"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)}},model:{value:t.activeLon,callback:function(e){t.activeLon=e},expression:"activeLon"}})],1):t._e()],1):"LOCATIONTYPE"==t.activeType?a("div",[a("v-select",{attrs:{items:t.locationTypeTypes},model:{value:t.activeLocationTypeType,callback:function(e){t.activeLocationTypeType=e},expression:"activeLocationTypeType"}}),"LIST"==t.activeLocationTypeType?a("div",[a("v-select",{attrs:{items:t.osmTypes,"item-text":"name","return-object":""},model:{value:t.activeOsmType,callback:function(e){t.activeOsmType=e},expression:"activeOsmType"}})],1):"CUSTOM"==t.activeLocationTypeType?a("div",[a("v-text-field",{attrs:{label:t._f("capitalize")(t.$t("APP.KEY"))},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}}),a("v-text-field",{attrs:{label:t._f("capitalize")(t.$t("APP.VALUE"))},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)}},model:{value:t.activeVal,callback:function(e){t.activeVal=e},expression:"activeVal"}})],1):t._e()],1):a("div",[a("v-text-field",{attrs:{label:t._f("capitalize")(t.$t("APP.KEY")),disabled:""}}),a("v-text-field",{attrs:{label:t._f("capitalize")(t.$t("APP.VALUE")),disabled:""}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("APP.CANCEL"))+" ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.addItem}},[t._v(" "+t._s(t.$t("APP.SAVE"))+" ")])],1)],1)},ia=[];const na=["NONE","LOCATION","LOCATIONTYPE"],oa=["NAME","COORDINATES"],ra=["LIST","CUSTOM"],ca=[{name:"Airport",key:"aeroway",value:"aerodrome"},{name:"Cafe",key:"amenity",value:"bar"},{name:"Church",key:"building",value:"church"},{name:"City square",key:"place",value:"square"},{name:"Flats",key:'"building:levels"',value:'"([6-9]|d{2,})"'},{name:"Gas station",key:"amenity",value:"fuel"},{name:"Hospital",key:"amenity",value:"hospital"},{name:"Hotel",key:"tourism",value:"hotel"},{name:"Palace",key:"castle_type",value:"palace"},{name:"Parking",key:"amenity",value:"parking"},{name:"Restaurant",key:"amenity",value:"restaurant"},{name:"Shopping street",key:"highway",value:"pedestrian"},{name:"Stadspoort",key:"historic",value:"city_gate"},{name:"Statue",key:"memorial",value:"statue"}];let la=class extends c["c"]{constructor(){super(),this.types=[...na],this.locationTypes=[...oa],this.activeLocationType="NAME",this.locationTypeTypes=[...ra],this.activeLocationTypeType="LIST",this.osmTypes=ca,this.activeOsmType={},this.activeType="NONE",this.activeLat=0,this.activeLon=0,this.activeKey="",this.activeVal="",this.newContext={type:"NONE",data:{}}}itemChanged(){console.log("Item changed"),this.resetNewItem(),this.item&&this.item.context&&(this.activeType=this.item.context.type,"LOCATION"===this.activeType?(this.activeLocationType=Object.keys(this.item.context.data).shift()||"NAME",this.activeVal=Object.values(this.item.context.data).shift()||"","COORDINATES"===this.activeLocationType&&(this.activeLat=this.activeVal.includes(",")?+this.activeVal.split(",").shift():0,this.activeLon=this.activeVal.includes(",")?+this.activeVal.split(",").pop():0)):"LOCATIONTYPE"===this.activeType?(this.activeLocationTypeType="CUSTOM",this.activeKey=Object.keys(this.item.context.data).shift()||"",this.activeVal=Object.values(this.item.context.data).shift()||""):(this.activeKey=Object.keys(this.item.context.data).shift()||"",this.activeVal=Object.values(this.item.context.data).shift()||""))}typeSelected(){this.newContext={type:this.activeType,data:{}}}async addItem(){this.newContext.type=this.activeType,"LOCATION"===this.activeType?"COORDINATES"===this.activeLocationType?this.newContext.data[this.activeLocationType]=`${this.activeLat},${this.activeLon}`:this.newContext.data[this.activeLocationType]=this.activeVal:"LOCATIONTYPE"===this.activeType?"CUSTOM"===this.activeLocationTypeType?this.newContext.data[this.activeKey]=this.activeVal:"LIST"===this.activeLocationTypeType&&(this.newContext.data[this.activeOsmType.key]=this.activeOsmType.value):this.newContext.data[this.activeKey]=this.activeVal,this.item.context=Object.assign({},this.newContext),this.$store.actions[this.item.type].save(this.item),this.$emit("close")}resetNewItem(){this.activeKey="",this.activeVal="",this.activeType="NONE"}async cancel(){this.$emit("close")}async mounted(){console.log("Add context card mounted"),this.itemChanged()}};Object(r["a"])([Object(c["b"])({default:()=>{}})],la.prototype,"item",void 0),Object(r["a"])([Object(c["d"])("item",{deep:!0})],la.prototype,"itemChanged",null),la=Object(r["a"])([Object(c["a"])({components:{}})],la);var da=la,ua=da,pa=(a("72d4"),Object(f["a"])(ua,sa,ia,!1,null,"2e945334",null)),va=pa.exports;let ha=class extends c["c"]{constructor(){super(),this.menu=!1}hasContext(t){return!!t&&!!t.context&&!!t.context.type}getContext(t){return t&&t.context&&t.context.type?t.context.type:this.$options.filters.capitalize(this.$t("APP.ADD_CONTEXT"))}async selectItem(){this.$store.actions[this.item.type].load(this.item.id)}async deleteItem(){this.$store.actions[this.item.type].del(this.item.id)}closeMenu(){this.menu=!1}async mounted(){}};Object(r["a"])([Object(c["b"])({default:()=>{}})],ha.prototype,"item",void 0),ha=Object(r["a"])([Object(c["a"])({components:{AddContextCard:va}})],ha);var ma=ha,fa=ma,ga=(a("3a50"),Object(f["a"])(fa,ea,aa,!1,null,"2183e92b",null)),ba=ga.exports,ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"add-component-card",attrs:{dense:""}},[t._v(" "+t._s(t.$t("APP.ADD",{item:this.getTranslateKey()}))+" ")]),a("v-card-text",{staticClass:"pb-0"},[a("v-text-field",{attrs:{label:t._f("capitalize")(""+t.$t("APP.NAME")),autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)}},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}}),a("v-text-field",{attrs:{label:"Type",disabled:""},model:{value:t.newItem.type,callback:function(e){t.$set(t.newItem,"type",e)},expression:"newItem.type"}},[t._v("itemkey")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("APP.CANCEL"))+" ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.addItem}},[t._v(" "+t._s(t.$t("APP.SAVE"))+" ")])],1)],1)},Ca=[];let Oa=class extends c["c"]{constructor(){super(),this.newItem={}}getTranslateKey(){return this.$tc("COMP."+this.itemkey.toUpperCase())}resetNewItem(){this.newItem={name:"",type:this.itemkey,id:z()}}async addItem(){this.$store.actions[this.itemkey].save(this.newItem),this.resetNewItem(),this.$emit("close")}async cancel(){this.resetNewItem(),this.$emit("close")}async mounted(){this.resetNewItem()}};Object(r["a"])([Object(c["b"])({default:""})],Oa.prototype,"itemkey",void 0),Oa=Object(r["a"])([Object(c["a"])({components:{}})],Oa);var _a=Oa,Ea=_a,Na=(a("3121"),Object(f["a"])(Ea,ya,Ca,!1,null,"7d1db352",null)),Ta=Na.exports;let Aa=class extends c["c"]{constructor(){super(),this.items=[],this.title="",this.language="",this.menu=!1}itemkeyChanged(){this.init()}languageChanged(){this.setTitle()}async setTitle(){this.itemkey&&this.itemkey.length&&(this.title=this.$tc("COMP."+this.itemkey.toLocaleUpperCase(),2))}async init(){this.itemkey&&this.itemkey.length&&(this.setTitle(),await this.$store.actions[this.itemkey].updateList(),this.$store.states.map(t=>{this.items=t[this.itemkey].list,this.language=t.app.language}))}async closeMenu(){this.menu=!1}mounted(){console.log("KanbanList mounted"),this.init()}};Object(r["a"])([Object(c["b"])({default:""})],Aa.prototype,"itemkey",void 0),Object(r["a"])([Object(c["d"])("itemkey")],Aa.prototype,"itemkeyChanged",null),Object(r["a"])([Object(c["d"])("language")],Aa.prototype,"languageChanged",null),Aa=Object(r["a"])([Object(c["a"])({components:{Container:ta["Container"],Draggable:ta["Draggable"],KanbanCard:ba,AddComponentCard:Ta}})],Aa);var xa=Aa,Sa=xa,Ia=(a("b0af"),Object(f["a"])(Sa,Qe,Ze,!1,null,"eb93e188",null)),ka=Ia.exports;let Pa=class extends c["c"]{constructor(){super(),this.rows=[],this.tab=0,this.categories={},this.categoryNames=[]}getCategoryRows(t){return this.rows.filter(e=>this.categories[t].includes(e))}async init(){this.$store.states.map(t=>{this.rows.length=0,st.forEach(t=>{this.rows.push(t)}),this.categories=t.scenarios.current?t.scenarios.current.categories:{},this.categoryNames=Object.keys(this.categories||[])})}onCardDrop(t,e){console.log("Drop "+t)}getCardPayload(t){return console.log("getCardPayload "+t),t}async mounted(){console.log("KanbanLists mounted"),this.init()}};Pa=Object(r["a"])([Object(c["a"])({components:{KanbanList:ka}})],Pa);var ja=Pa,wa=ja,La=(a("fc83"),Object(f["a"])(wa,Je,qe,!1,null,"b9a79d90",null)),$a=La.exports;let Ra=class extends c["c"]{mounted(){console.log("DimensionsView mounted")}};Ra=Object(r["a"])([Object(c["a"])({components:{KanbanLists:$a}})],Ra);var Ma=Ra,Da=Ma,Va=Object(f["a"])(Da,He,Ke,!1,null,"5155dfe7",null),za=Va.exports,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"full-height pa-0",attrs:{fluid:""}},[a("v-row",{staticClass:"full-height",attrs:{"no-gutters":"",justify:"center"}},[a("v-col",{staticClass:"full-height",attrs:{md:"12",cols:"12"}},[a("ConsistencyMatrices")],1)],1)],1)},Ga=[],Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-height"},[a("v-tabs",{on:{change:t.tabChanged},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue"}}),t._l(t.categoryNames,(function(e){return a("v-tab",{key:e},[t._v(" "+t._s(e)+" ")])}))],2),a("v-tabs-items",{staticClass:"full-height",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.categories,(function(e,s){return a("v-tab-item",{key:s,staticClass:"full-height"},[a("v-card",{staticClass:"flex-card full-height",staticStyle:{background:"transparent"},attrs:{dense:"",flat:"",tile:""}},[a("v-card-text",{staticClass:"text-description ma-0 pa-2 full-height"},[a("v-container",{staticClass:"ma-0 pa-0 full-height",attrs:{fluid:""}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex",attrs:{xs:"12",md:"6"}},[a("span",{staticClass:"title pt-4"},[t._v(" "+t._s(t._f("capitalize")(t.$t("APP.COMBINATIONS")))+" ")]),a("span",{staticClass:"ml-8 mb-2"},[a("v-select",{staticClass:"sel-dim",attrs:{label:t._f("capitalize")(t.$t("APP.SELECT_DIMENSION")),items:t.getCategoryRowsMap(s)},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1)]),a("v-col",{staticClass:"d-flex",attrs:{xs:"12",md:"6"}},[a("div",{staticClass:"d-block pb-4"},[a("span",{staticClass:"d-block"},[a("v-icon",{staticClass:"pr-1"},[t._v("mdi-checkbox-blank")]),t._v(t._s(t.$t("APP.CONSISTENT")))],1),a("span",{staticClass:"d-block"},[a("v-icon",{staticClass:"pr-1"},[t._v("mdi-checkbox-blank-outline")]),t._v(t._s(t.$t("APP.INCONSISTENT")))],1),a("span",{staticClass:"d-block"},[a("v-icon",{staticClass:"pr-1"},[t._v("mdi-checkerboard")]),t._v(t._s(t.$t("APP.PARTLY_CONSISTENT"))+" ")],1)])])],1),t.scenario?a("v-row",{staticClass:"full-height-min-select",attrs:{"no-gutters":""}},[a("TableCard",{attrs:{category:t.selectedCategory,othercategories:t.getCategoryRows(s),inconsistencies:t.scenario.inconsistencies}})],1):t._e()],1)],1)],1)],1)})),1)],1)},Ba=[],Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"full-width full-height table-card"},[a("v-card-text",{staticClass:"pa-0 full-width full-height-min-title"},[a("v-container",{staticClass:"ma-0 pa-0 full-height",attrs:{fluid:""}},[a("v-row",{staticClass:"full-height",attrs:{"no-gutters":""}},[t.collections?a("v-col",{staticClass:"full-height"},[a("v-simple-table",{staticClass:"full-height",attrs:{dense:"","fixed-header":"",height:"100%"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left bold--text"},[t._v(t._s(t._f("capitalize")(t.$tc("APP.DIMENSION"))))]),a("th",{staticClass:"text-left bold--text more-padding"},[t._v(t._s(t._f("capitalize")(t.$tc("APP.NAME"))))]),t._l(t.items,(function(e){return a("th",{key:e.id,staticClass:"text-left"},[t._v(t._s(t._f("capitalize")(e.name)))])}))],2)]),a("tbody",{staticClass:"consistency-table"},[t._l(t.otherCategoriesWithoutSelected(),(function(e){return t._l(t.collections[e].list,(function(s){return a("tr",{key:s.id},[a("td",[t._v(t._s(t._f("capitalize")(t.$tc("COMP."+e.toLocaleUpperCase()))))]),a("td",{staticClass:"more-padding"},[t._v(t._s(t._f("capitalize")(s.name)))]),t._l(t.items,(function(e){return a("td",{key:e.id},[t.incons(s.id,e.id,"partly")?a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,o=i.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.setcons(s.id,e.id,void 0)}}},"v-btn",o,!1),n),[a("v-icon",[t._v("mdi-checkerboard")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t.$t("APP.PARTLY_CONSISTENT")))])]):t._e(),t.incons(s.id,e.id,"totally")?a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,o=i.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.setcons(s.id,e.id,"partly")}}},"v-btn",o,!1),n),[a("v-icon",[t._v("mdi-checkbox-blank-outline")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t.$t("APP.INCONSISTENT")))])]):t._e(),t.incons(s.id,e.id,void 0)?a("v-tooltip",{attrs:{right:"","open-delay":"1000"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,o=i.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.setcons(s.id,e.id,"totally")}}},"v-btn",o,!1),n),[a("v-icon",[t._v("mdi-checkbox-blank")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t.$t("APP.CONSISTENT")))])]):t._e()],1)}))],2)}))}))],2)]},proxy:!0}],null,!1,2426715974)})],1):t._e()],1)],1)],1)],1)},Ya=[];let Wa=class extends c["c"]{constructor(){super(),this.items=[],this.collections=null,this.alwaysTrue=!0}categoryChanged(t){console.log("categoryChanged to "+t),this.init()}otherCategoriesWithoutSelected(){return this.othercategories.filter(t=>t!=this.category)}incons(t,e,a){const s=this.inconsistencies.filter(a=>a.ids.includes(t)&&a.ids.includes(e)).pop();return s?s.type===a:!a}setcons(t,e,a){if(a){const s=this.inconsistencies.filter(a=>a.ids.includes(t)&&a.ids.includes(e)).pop();s?s.type=a:this.inconsistencies.push({ids:[t,e],type:a})}else{const a=this.inconsistencies.findIndex(a=>a.ids.includes(t)&&a.ids.includes(e));a>=0&&this.inconsistencies.splice(a,1)}this.$store.actions.updateInconsistencies(this.inconsistencies)}async init(){this.$store.states.map(t=>{this.items=this.category?t[this.category].list:[],this.collections=t})}async mounted(){console.log("Table card mounted"),this.init()}};Object(r["a"])([Object(c["b"])({default:null})],Wa.prototype,"category",void 0),Object(r["a"])([Object(c["b"])({default:()=>[]})],Wa.prototype,"othercategories",void 0),Object(r["a"])([Object(c["b"])({default:()=>[]})],Wa.prototype,"inconsistencies",void 0),Object(r["a"])([Object(c["d"])("category")],Wa.prototype,"categoryChanged",null),Wa=Object(r["a"])([Object(c["a"])({components:{}})],Wa);var Ha=Wa,Ka=Ha,Ja=(a("ec7f"),Object(f["a"])(Ka,Xa,Ya,!1,null,null,null)),qa=Ja.exports;let Qa=class extends c["c"]{constructor(){super(),this.tab=0,this.scenario={},this.rows=[],this.categories={},this.categoryNames=[],this.selectedCategory=null}inconsistenciesChanged(){this.$store.actions["scenarios"].save(this.scenario)}tabChanged(t){console.log(t),this.selectedCategory=Object.values(this.categories)[t][0]}getCategoryRows(t){return this.rows.filter(e=>this.categories[t].includes(e))}getCategoryRowsMap(t){return this.rows.filter(e=>this.categories[t].includes(e)).map(t=>({text:tt(t),value:t}))}async init(){this.$store.states.map(t=>{this.scenario=t.scenarios.current||this.scenario,this.scenario&&!this.scenario.inconsistencies&&(this.scenario.inconsistencies=[]),this.rows.length=0,st.forEach(t=>{this.rows.push(t)}),this.categories=this.scenario?this.scenario.categories:{},this.selectedCategory=this.selectedCategory?this.selectedCategory:this.rows.length>0?this.rows[0]:null,this.categoryNames=Object.keys(this.categories||[])})}mounted(){console.log("ConsistencyMatrices mounted"),this.init()}};Object(r["a"])([Object(c["d"])("scenario.inconsistencies")],Qa.prototype,"inconsistenciesChanged",null),Qa=Object(r["a"])([Object(c["a"])({components:{TableCard:qa}})],Qa);var Za=Qa,ts=Za,es=(a("90f7"),Object(f["a"])(ts,Fa,Ba,!1,null,null,null)),as=es.exports;let ss=class extends c["c"]{mounted(){console.log("ConsistencyView mounted")}};ss=Object(r["a"])([Object(c["a"])({components:{ConsistencyMatrices:as}})],ss);var is=ss,ns=is,os=Object(f["a"])(ns,Ua,Ga,!1,null,"5fb4fde4",null),rs=os.exports;W["default"].use(Rt["a"]);var cs=new Rt["a"]({base:"/dashboard/",routes:[{path:"/",redirect:{name:"dimensions"}},{path:"/add",name:"dimensions",component:za},{path:"/consistency",name:"consistency",component:rs},{path:"/create",name:"create",component:We},{path:"/show",name:"show",component:je},{path:"/about",name:"about",component:Wt}]}),ls=(a("032a"),a("a33f")),ds=(a("d142"),a("cee8")),us=a.n(ds),ps=a("241b"),vs=a.n(ps),hs=a("8206"),ms=a.n(hs);const fs=1.5,gs=5;class bs{constructor(){this.nominatim="https://nominatim.openstreetmap.org/search?limit=10&",this.overpass=us.a}getQueryboxFromCoordinates(t,e){const a=this.createFeature(t,{}),s=Object(te["buffer"])(a,e,{units:"kilometers"}),i=Object(te["bbox"])(s);return{minlat:+i[0],minlon:+i[1],maxlat:+i[2],maxlon:+i[3]}}async getGeojsonFromCoordinates(t,e,a){let s=this.getQueryboxFromCoordinates(t,fs);this.getGeojson(s,e,i=>{i&&i.features&&0!==i.features.length?a(i):(console.log("Extending search radius to "+gs),s=this.getQueryboxFromCoordinates(t,gs),this.getGeojson(s,e,a))})}getQueryboxFromQuery(t,e){const a=Object(te["buffer"])(Object(te["center"])(this.createFeature([+t.lat,+t.lon],{})),e,{units:"kilometers"}),s=Object(te["bbox"])(a);return{minlat:+s[0],minlon:+s[1],maxlat:+s[2],maxlon:+s[3]}}async getGeojsonFromQuery(t,e,a){const s=vs.a.stringify({q:t,format:"json"}),i=await ms.a.get(`${this.nominatim}${s}`),n=i.data;if(!n||!n.length)return void console.warn("Nothing found for "+t);const o=n.shift();let r=this.getQueryboxFromQuery(o,fs);this.getGeojson(r,e,t=>{t&&t.features&&0!==t.features.length?a(t):(console.log("Extending search radius to "+gs),r=this.getQueryboxFromQuery(o,gs),this.getGeojson(r,e,a))})}async getGeojson(t,e,a){const s=`[out:json];(node(${t.minlat},${t.minlon},${t.maxlat},${t.maxlon})[${e}];way(${t.minlat},${t.minlon},${t.maxlat},${t.maxlon})[${e}];relation(${t.minlat},${t.minlon},${t.maxlat},${t.maxlon})[${e}];);out center 10;`;console.log(s),this.overpass(s,(t,e)=>{t?(console.log(t),a({type:"FeatureCollection",features:[]})):(console.log(e),e.features.forEach(t=>{t.properties=t.properties||{},delete t.properties.geometry,t.properties.name=t.properties["tags"]&&t.properties["tags"]["name"]||"?"}),a(e))})}createFeature(t,e){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:{name:e&&e["tags"]&&e["tags"]["name"]||"?"}}}createFeatureOverpass(t){return this.createFeature([t.center.lon,t.center.lat],Object.assign({id:t.id},t.tags))}}W["default"].config.productionTip=!1,W["default"].prototype.$store=ut,W["default"].prototype.$overpass=new bs,W["default"].use($t.a),W["default"].use(ls["a"],{dataProjection:"EPSG:4326"}),W["default"].use(i.a),W["default"].filter("uppercase",t=>t?(t=t.toString(),t.toUpperCase()):""),W["default"].filter("capitalize",t=>t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""),W["default"].filter("trim",t=>t?t.trim():""),W["default"].filter("translateCollectionName",t=>t?tt(t):"");const ys=new $t.a({icons:{iconfont:"mdi"},theme:{dark:!1,themes:{light:{accent:"#5FB0C7",secondary:"#ddeced"},dark:{accent:"#3f798a",secondary:"#223132"}}}});e["default"]=new W["default"]({vuetify:ys,router:cs,i18n:Z,render:t=>t(wt)}).$mount("#app")},cfa4:function(t,e,a){"use strict";var s=a("22d0"),i=a.n(s);i.a},d07b:function(t,e,a){"use strict";var s=a("afd5"),i=a.n(s);i.a},d297:function(t,e,a){},db1b:function(t,e,a){},dda0:function(t,e,a){},e8b2:function(t,e,a){"use strict";var s=a("7824"),i=a.n(s);i.a},ec7f:function(t,e,a){"use strict";var s=a("53e5"),i=a.n(s);i.a},fbbd:function(t,e,a){"use strict";var s=a("abb8"),i=a.n(s);i.a},fc83:function(t,e,a){"use strict";var s=a("3e03"),i=a.n(s);i.a}});
//# sourceMappingURL=app.e1729e92.js.map